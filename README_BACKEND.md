
                              ** 娥拣筐梆拆 **

#  拆 ю

## ** OBJETIVOS**

-  Construir una aplicaci贸n de p谩gina 煤nica (SPA) utilizando tecnolog铆as como React, Node, Y MUI garantizando un rendimiento eficiente y una gesti贸n integral de la aplicaci贸n.
-  Requisito TECH: Deploy - Asegurar que la aplicaci贸n est茅 desplegada en una plataforma accesible p煤blicamente.

## **   Aplicar Principios de Dise帽o UX/UI: **

-  Implementar Material-UI (MUI) y styled-components para crear una interfaz de usuario atractiva, coherente y altamente funcional.
-  Utilizar styled-components para la creaci贸n de estilos, asegurando una presentaci贸n visual coherente y agradable.
-  Incorporar react-material-ui-carousel para mejorar la experiencia del usuario al presentar im谩genes y contenido visual.
- Requisito TECH: Auth de terceros integrada - Garantizar una experiencia de usuario fluida y segura al permitir registros y logins a trav茅s de terceros.

## **   Integrar Tecnolog铆as de Vanguardia: **

-  Utilizar herramientas modernas como Axios para realizar solicitudes HTTP de manera eficiente, facilitando la comunicaci贸n con el back-end.
-  Integrar react-router-dom para gestionar la navegaci贸n entre las diversas vistas de la aplicaci贸n de manera eficiente.
-  Requisito TECH: Pasarela de pagos - Implementar pagos seguros para productos y servicios utilizando MercadoPago.

## **   Aplicar flujo de trabajo eficiente de GIT: **

-  Seguir buenas pr谩cticas de Git, realizando commits significativos y descriptivos para mantener un historial claro y comprensible del desarrollo.
-  Utilizar el script "start" para servir la aplicaci贸n de manera local durante el desarrollo, asegurando un flujo de trabajo suave y colaborativo.
-  Requisito TECH: Dashboard admin - Facilitar la gesti贸n de usuarios y productos mediante un panel de administrador.

## **   Pruebas Pr谩cticas: **

-  Implementar pruebas unitarias utilizando las herramientas proporcionadas por React y otras bibliotecas relevantes, garantizando la robustez y confiabilidad del c贸digo.
-  Asegurar la estabilidad y confiabilidad de la aplicaci贸n mediante pruebas de integraci贸n exhaustivas.
-  Requisito TECH: Borrado l贸gico - Implementar borrado l贸gico en productos, servicios y usuarios para una gesti贸n m谩s efectiva de los datos.

## **   Cumplir con Historias de Usuarios: **

-  Desarrollar funcionalidades basadas en las User Stories definidas para satisfacer las necesidades espec铆ficas de los clientes y profesores del gimnasio.
-  Integrar mui-file-input para mejorar la experiencia de carga y manipulaci贸n de archivos, facilitando la interacci贸n del usuario.
-  Requisito TECH: Reviews/puntuaci贸n - Permitir a los usuarios proporcionar opiniones y valoraciones sobre productos, clases e instructores.

## **   Documentar el Flujo y la L贸gica del Front-end: **

-  Proporcionar una explicaci贸n detallada del flujo y la l贸gica de construcci贸n del front-end en el README, incluyendo la estructura y organizaci贸n de los componentes, as铆 como cualquier patr贸n de dise帽o utilizado.
-  Requisito TECH: Cloudinary/upload/bucket - Explicar c贸mo se utiliza Cloudinary para almacenar im谩genes de productos y servicios.

## **    Aprender y Mejorar Constantemente: **

-  Buscar oportunidades para aprender nuevas tecnolog铆as y enfoques durante el desarrollo del proyecto, manteni茅ndose al tanto de las 煤ltimas actualizaciones y tendencias.
-  Estar abierto a la retroalimentaci贸n y realizar mejoras continuas en la aplicaci贸n, considerando las actualizaciones de las herramientas utilizadas y buscando siempre la excelencia en el desarrollo.
-  Requisito TECH: Filtros combinados - Mejorar la interfaz del usuario mediante filtros combinados para servicios y productos.

<br />

---

## ** SOBRE el levantamiento del back...**

Para asegurar el funcionamiento adecuado, sigue estos pasos:

1. Al iniciar el proyecto, ejecuta el comando:

npm install

Esto instalar谩 todas las dependencias necesarias.

2. Posteriormente, inicia el servidor local ejecutando:

```bash
   npm start
```
Esta acci贸n activar谩 el manejo de datos locales y permitir谩 su utilizaci贸n en diferentes partes de la aplicaci贸n.

Siguiendo estos pasos, tendr谩s acceso a los datos locales almacenados en el proyecto, optimizando el desarrollo y la interacci贸n con la informaci贸n necesaria.

de esta manera se te levantara el back
<br />

[nodemon] 3.0.1
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,cjs,json
[nodemon] starting `node index.js`
%s listening at 3001
**************************    GymSpace    ***********************
---

##  ENUNCIADO GENERAL

Este proyecto tiene como prop贸sito la creaci贸n de una aplicaci贸n, gui谩ndonos por la descripci贸n detallada de una plataforma de administraci贸n de gimnasios. La aplicaci贸n proporcionar谩 una experiencia completa a los usuarios y facilitar谩 la gesti贸n eficiente de servicios y productos del gimnasio.


```bash

Objetivos Claves:
```

```bash

recordar que el back esta deployado link del deploy 
(https://gymspace-backend.onrender.com/)
```

## Registro y Gesti贸n de Usuarios:

Permitir a los usuarios registrarse en la plataforma para una gesti贸n centralizada de datos, incluyendo membres铆as, servicios, y productos.

## Administraci贸n de Membres铆as:

Brindar a los usuarios la capacidad de gestionar su membres铆a, desde renovaciones hasta cambios de plan, todo desde la comodidad de la plataforma.

## Adquisici贸n de Servicios Adicionales:

Facilitar a los usuarios la compra de servicios adicionales como clases especiales o entrenamientos personalizados.

## Compras de Productos:

Ofrecer a los usuarios la posibilidad de explorar y adquirir productos relacionados con el gimnasio, creando una experiencia de compra integral.

## Exploraci贸n de Clases Disponibles:

Permitir a los usuarios ver las clases disponibles, verificar cupos y realizar registros de participaci贸n.

## Valoraci贸n y Retroalimentaci贸n:

Habilitar la valoraci贸n y rese帽as por parte de los usuarios sobre clases, productos y entrenadores, contribuyendo a la mejora continua.

## Notificaciones Personalizadas:

Opci贸n para que los usuarios reciban notificaciones por correo electr贸nico o mensajes push, manteni茅ndolos informados sobre eventos, recordatorios de pago y anuncios relevantes.

## Verificaci贸n de Disponibilidad en Clases:

Incorporar una funci贸n de verificaci贸n de disponibilidad antes de la inscripci贸n en clases, garantizando una experiencia sin contratiempos.

## Gesti贸n Eficiente de Usuarios:

Capacitar a los administradores con herramientas para gestionar eficazmente la informaci贸n de los usuarios, incluyendo la capacidad de bloquear o desbloquear cuentas seg煤n sea necesario.

## Flexibilidad en Oferta de Servicios y Productos:

Facilitar a los administradores la capacidad de agregar, editar o eliminar servicios y productos, adaptando la oferta a las necesidades cambiantes del mercado.

## Supervisi贸n y Gesti贸n de Clases y Pagos:

Mantener un registro de la disponibilidad de clases, permitir inscripciones, y gestionar eficientemente los pagos, incluyendo recordatorios cuando sea necesario.

## Importante: 

- **Node.js / Express**: Backend construido con Node.js y el framework Express.
- **Sequelize**: ORM para interactuar con la base de datos PostgreSQL.

<br />

Es importante recodar que las dependencias las tendras una vez que ejecutes en la terminal 


```bash

npm install
```
<br />

---

## ** PARA COMENZAR...**

3. En la carpeta **`api`** deber谩s crear un archivo llamado: **`.env`** que tenga la siguiente forma:

   ```env
       DB_HOST =isabelle.db.elephantsql.com
       DB_USER =ugdgulic 
       DB_NAME = ugdgulic 
       DB_PASSWORD = 38J5zHz3ozwIpgzmXr1xvdFEU_seX1H3
   ``

4. Adicionalmente ser谩 necesario que crees, **desde psqlTools**, una base de datos llamada **`GymSpace`**. y configurar con los datos para que no exista problemas en el lavantamiento del back.

<br />

---

<br />

## ** INSTRUCCIONES**

### ** BASE DE DATOS (db.js)**

db.js es el archivo encargado de establecer la conexi贸n con la base de datos PostgreSQL y cargar los modelos necesarios para interactuar con ella. Aqu铆 est谩 la descripci贸n de la l贸gica y funcionalidad del archivo:

L贸gica y Funcionalidad de db.js:

Configuraci贸n de la Conexi贸n a la Base de Datos:

dotenv se utiliza para cargar las variables de entorno desde un archivo .env.
Se utiliza la librer铆a Sequelize para establecer la conexi贸n con la base de datos PostgreSQL.
Las credenciales de la base de datos se obtienen desde las variables de entorno (DB_USER, DB_PASSWORD, DB_HOST, DB_NAME).
Se desactiva el logging de las consultas (logging: false) y se utiliza el driver nativo de Sequelize (native: false).
Definici贸n de Modelos:

Se importan los modelos necesarios desde archivos externos (Users, Products, UserProducts, Services, UserServices, Coaches).
Cada modelo se ejecuta con la instancia de Sequelize para definir la estructura de la tabla correspondiente en la base de datos.
Relaciones entre Modelos:

Se establecen relaciones entre los modelos para reflejar las asociaciones en la base de datos.
Por ejemplo, la relaci贸n entre Users, UserServices, y Services se define con las funciones hasMany y belongsTo.
Exportaci贸n del Contexto de Base de Datos:

Se exportan todos los modelos y la instancia de Sequelize para que puedan ser utilizados en otras partes de la aplicaci贸n.
Flujo de Ejecuci贸n:

El archivo comienza cargando las variables de entorno y configurando la conexi贸n con la base de datos.
Luego, importa los modelos necesarios y los ejecuta con la instancia de Sequelize para definir su estructura.
Se establecen las relaciones entre los modelos para reflejar la estructura de la base de datos.
Finalmente, se exportan los modelos y la instancia de Sequelize para su uso en otras partes de la aplicaci贸n.
Este archivo sirve como el punto central para la interacci贸n con la base de datos, proporcionando un contexto unificado para acceder y manipular los datos.

tendra los siguientes models 

**`Coaches.js, Products.js, Sercives.js, UserProducts.js, Users.js, UserServices.js, Reviews.js, ServiceCoach.js`**

A continuaci貌n se brindara la logica y funcionalidad de los models

 ** MODELO 1 | Coaches,js** 

L贸gica y Funcionalidad:

Define el modelo Coaches que representa a los entrenadores.
Cada entrenador tiene un userID 煤nico, firstName, lastName, photo, y valuation que representa su calificaci贸n.
Se especifica la validaci贸n para asegurarse de que valuation est茅 en el rango de 1 a 10.
Se desactiva el registro de timestamp para este modelo (timestamps: false).

** MODELO 2 | Products.js** 

L贸gica y Funcionalidad:

Define el modelo Products que representa los productos disponibles.
Cada producto tiene un productID 煤nico, name, description, category, price, stockNow, brand, image, y status.
Se aplican validaciones para asegurar que price y stockNow sean mayores que cero.
Se desactiva el registro de timestamp para este modelo (timestamps: false).

** MODELO 3 | Services.js** 

L贸gica y Funcionalidad:

Define el modelo Services que representa los servicios ofrecidos.
Cada servicio tiene un serviceID 煤nico, name, description, category, price, startTime, duration, image, status, coachID, capacity, y areaID.
Se aplican validaciones para asegurar que price y capacity sean mayores que cero.
Se desactiva el registro de timestamp para este modelo (timestamps: false).

** MODELO 4 | UserProducts.js** 

L贸gica y Funcionalidad:

Define el modelo UserProducts que representa las transacciones de productos por parte de los usuarios.
Cada transacci贸n tiene un userProductID 煤nico, valuation, qty, unitPrice, date, userID, productID, status, state, picture_url, currency_id, description, title, mp_payment_id, mp_status, y mp_merchant_order_id.
Se aplican validaciones para valuation, qty, y unitPrice para asegurar valores v谩lidos.
Se establecen las relaciones con los modelos Users y Products.
Se desactiva el registro de timestamp para este modelo (timestamps: false).

** MODELO 5 | Users.js**

L贸gica y Funcionalidad:

Define el modelo Users que representa a los usuarios.
Cada usuario tiene un userID 煤nico, firstName, lastName, email, password, birth, gender, address, phone, contactPhone, photo, enrollmentDate, status, y systemRole.
Se aplican validaciones para email, password, gender, y systemRole.
Se desactiva el registro de timestamp para este modelo (timestamps: false).

** MODELO 6 | UserServices.js**

L贸gica y Funcionalidad:

Define el modelo UserServices que representa las transacciones de servicios por parte de los usuarios.
Cada transacci贸n tiene un userServicesID 煤nico, startDate, finishDate, startTime, valuation, qty, unitPrice, date, status, userID, y serviceID.
Se aplican validaciones para valuation, qty, y unitPrice para asegurar valores v谩lidos.
Se establecen las relaciones con los modelos Users y Services.
Se desactiva el registro de timestamp para este modelo (timestamps: false).
Cada modelo define la estructura de su respectiva tabla en la base de datos y especifica las validaciones necesarias para garantizar la integridad de los datos. Adem谩s, se establecen relaciones entre los modelos para reflejar las asociaciones en la base de datos. 

** MODELO 7 | Reviews.js**
El modelo Reviews representa las revisiones o comentarios realizados por usuarios sobre los servicios que han adquirido. Aqu铆 est谩 la descripci贸n de la l贸gica y funcionalidad del modelo:

reviewID: Identificador 煤nico de la revisi贸n, generado autom谩ticamente y utilizado como clave primaria.

userServicesID: Identificador 煤nico del servicio asociado a la revisi贸n. Est谩 vinculado al modelo UserServices, permitiendo establecer una relaci贸n entre la revisi贸n y el servicio.

comment: Texto que contiene el comentario o revisi贸n del usuario sobre el servicio. Es un campo obligatorio y no puede estar vac铆o.

display: Campo opcional que puede contener informaci贸n sobre la visualizaci贸n de la revisi贸n. Puede utilizarse para indicar si la revisi贸n debe mostrarse o no. Puede ser nulo.

L贸gica y Funcionalidad:

Permite almacenar revisiones asociadas a servicios para recopilar opiniones de los usuarios.
La relaci贸n con UserServices garantiza que cada revisi贸n est茅 vinculada a un servicio espec铆fico.
El campo display ofrece flexibilidad para gestionar la visibilidad de las revisiones.

** MODELO 8 | ServiceCoach.js**
El modelo ServiceCoach establece una relaci贸n entre los servicios y los entrenadores (coaches). Aqu铆 est谩 la descripci贸n de la l贸gica y funcionalidad del modelo:

serviceCoachID: Identificador 煤nico para la relaci贸n entre servicio y entrenador. Es generado autom谩ticamente y se utiliza como clave primaria.

userID: Identificador 煤nico del usuario (entrenador) asociado al servicio. Est谩 vinculado al modelo Users.

serviceID: Identificador 煤nico del servicio asociado al entrenador. Est谩 vinculado al modelo Services.

L贸gica y Funcionalidad:

Permite establecer una relaci贸n entre los servicios y los entrenadores que los ofrecen.
Cada registro en este modelo representa un servicio asociado a un entrenador espec铆fico.
Las claves for谩neas userID y serviceID aseguran la integridad referencial al vincular este modelo con Users y Services respectivamente.
No utiliza marcas de tiempo para rastrear la creaci贸n o actualizaci贸n de registros.

<br />
 --------
<br />

---

<br />

### ** BACK-END**

el Back contara con las siguientes Rutas:

L贸gica y Funcionalidad de las Rutas:
1. Ruta: Service.js
GET /

L贸gica:
Obtiene todos los servicios disponibles.
Funcionalidad:
Devuelve un arreglo con informaci贸n detallada de cada servicio.
GET /:id

L贸gica:
Obtiene informaci贸n detallada de un servicio espec铆fico por su ID.
Funcionalidad:
Devuelve un objeto con la informaci贸n del servicio.
POST /

L贸gica:
Crea un nuevo servicio.
Funcionalidad:
Recibe la informaci贸n del nuevo servicio por el cuerpo de la solicitud y lo crea en la base de datos.
DELETE /:id

L贸gica:
Elimina un servicio espec铆fico por su ID.
Funcionalidad:
Elimina el servicio correspondiente de la base de datos.
PUT /:id

L贸gica:
Actualiza la informaci贸n de un servicio espec铆fico por su ID.
Funcionalidad:
Recibe la informaci贸n actualizada por el cuerpo de la solicitud y actualiza el servicio en la base de datos.
2. Ruta: UserProduct.js
GET /

L贸gica:
Obtiene todos los productos asociados a usuarios.
Funcionalidad:
Devuelve un arreglo con informaci贸n detallada de cada producto asociado a un usuario.
GET /:id

L贸gica:
Obtiene informaci贸n detallada de un producto asociado a usuario espec铆fico por su ID.
Funcionalidad:
Devuelve un objeto con la informaci贸n del producto asociado a usuario.
POST /

L贸gica:
Crea un nuevo producto asociado a usuario.
Funcionalidad:
Recibe la informaci贸n del nuevo producto por el cuerpo de la solicitud y lo asocia al usuario en la base de datos.
PUT /:id

L贸gica:
Actualiza la informaci贸n de un producto asociado a usuario espec铆fico por su ID.
Funcionalidad:
Recibe la informaci贸n actualizada por el cuerpo de la solicitud y actualiza el producto asociado al usuario en la base de datos.
DELETE /:id

L贸gica:
Elimina un producto asociado a usuario espec铆fico por su ID.
Funcionalidad:
Elimina el producto asociado al usuario correspondiente de la base de datos.
3. Ruta: Users.js
GET /

L贸gica:
Obtiene todos los usuarios.
Funcionalidad:
Devuelve un arreglo con informaci贸n detallada de cada usuario.
GET /:id

L贸gica:
Obtiene informaci贸n detallada de un usuario espec铆fico por su ID.
Funcionalidad:
Devuelve un objeto con la informaci贸n del usuario.
POST /

L贸gica:
Crea un nuevo usuario.
Funcionalidad:
Recibe la informaci贸n del nuevo usuario por el cuerpo de la solicitud y lo crea en la base de datos.
DELETE /:id

L贸gica:
Elimina un usuario espec铆fico por su ID.
Funcionalidad:
Elimina el usuario correspondiente de la base de datos.
PUT /:id

L贸gica:
Actualiza la informaci贸n de un usuario espec铆fico por su ID.
Funcionalidad:
Recibe la informaci贸n actualizada por el cuerpo de la solicitud y actualiza el usuario en la base de datos.
4. Ruta: userService.js
POST /
L贸gica:
Crea un nuevo servicio asociado a usuario.
Funcionalidad:
Recibe la informaci贸n del nuevo servicio por el cuerpo de la solicitud y lo asocia al usuario en la base de datos.

<br /> 

al tener las rutas su logica y funcionalidad vamos a iniciar con el app y el index como componentes raiz del proyecto (back) 

1. **app.js**
L贸gica:

Configuraci贸n del servidor Express.
Uso de middlewares como body-parser, cookie-parser, morgan, y cors.
Configuraci贸n de rutas utilizando el router de ./routes/index.js.
Manejo de errores.
Funcionalidad:

Inicia un servidor Express.
Utiliza middlewares para procesar las solicitudes.
Define rutas y utiliza el enrutador principal.
Maneja errores y los muestra en la consola.
Exporta el servidor configurado.

**aqui pondre la funcionalidad y flujo de los controllers**

 **autho**
Funcionalidad:

Este controlador se encarga de obtener un token de autenticaci贸n utilizando el flujo de concesi贸n de contrase帽as (password Grant) con Auth0.
Utilice las credenciales del backend (usuario y contrase帽a) junto con las credenciales del cliente (client_id y client_secret) para obtener un token de acceso.
Retorna el token de acceso en caso de 茅xito, o un mensaje de error en caso contrario.
Flujo:

Recibe la solicitud con las creencias.
Realice una solicitud HTTP POST a la URL de Auth0 para obtener el token.
Si la solicitud es exitosa, retorna el token de acceso. En caso de error, devuelve un mensaje de error.

 **chat**
Funcionalidad:

Este controlador se encarga de realizar una solicitud a la API de OpenAI para obtener una respuesta del modelo de lenguaje GPT-3.
Utiliza el contenido de la
Retorna la respuesta generada por el modelo o un mensaje de error en caso de fallo.
Flujo:

Recibe la solicitud con los datos necesarios para interactuar con el modelo de lenguaje.
Realice una solicitud HTTP POST a la API de OpenAI con los datos proporcionados.
Si la solicitud es exitosa, retorna la respuesta generada por el modelo. En caso de error, devuelve un mensaje de error.

**Coaches**

**createCoach.controller**
Funcionalidad:

Crea un nuevo registro de entrenador en la base de datos.
Realiza validaciones de autorizaci贸n y de datos proporcionados.
Retorna el nuevo entrenador creado o un mensaje de error.
Flujo:

Valida la autorizaci贸n del usuario para crear un coach (solo permitido para roles de administrador).
Valida los datos proporcionados para el nuevo entrenador.
Crea el nuevo entrenador en la base de datos.
Retorna el entrenador creado o un mensaje de error.

**deleteCoachById.controller**
Funcionalidad:

Elimina un registro de entrenador de la base de datos por su ID.
Realiza validaciones de autorizaci贸n y del formato del DNI.
Retorna un mensaje de 茅xito o un mensaje de error.
Flujo:

Valida la autorizaci贸n del usuario para eliminar un coach (solo permitido para roles de administrador).
Valida el formato del documento de identidad proporcionado.
Busca el entrenador por su ID.
Si encuentra el entrenador, lo elimina de la base de datos.
Retorna un mensaje de 茅xito o un mensaje de error.

 **getCoachById.controller**
Funcionalidad:

Obtiene los detalles de un entrenador por su identificaci贸n.
Realiza validaciones del formato del ID.
Retorna los detalles del entrenador o un mensaje de error.
Flujo:

Valida el formato del documento de identidad proporcionado.
Busca el entrenador por su ID.
Si encuentra el entrenador, retorna sus detalles. En caso contrario, devuelve un mensaje de error.

 **getCoaches.controller**
Funcionalidad:

Obtiene la lista de autocares seg煤n los filtros y orden proporcionados.
Realiza filtrado y ordenamiento por nombre y valoraci贸n.
Retorna la lista de entrenadores o un mensaje de error.
Flujo:

Defina opciones de filtrado y ordenamiento seg煤n los par谩metros de la solicitud.
Realice una consulta a la base de datos utilizando las opciones definidas.
Retorna la lista de entrenadores resultante o un mensaje de error.

 **updateCoach.controller**
Funcionalidad:

Actualiza los detalles de un entrenador por su ID.
Realiza validaciones de autorizaci贸n, formato del DNI y datos proporcionados.
Retorna los detalles actualizados del entrenador o un mensaje de error.
Flujo:

Valida la autorizaci贸n del usuario para actualizar un coach (permitido para el usuario o roles de administrador).
Valida el formato del documento de identidad proporcionado.
Busca el entrenador por su ID.
Valida los datos proporcionados para la actualizaci贸n.
Si todo es v谩lido, actualice los detalles del coach en la base de datos.
Retorna los detalles actualizados del entrenador o un mensaje de error.

**mailer**
Funcionalidad:

Este controlador se encarga de enviar correos electr贸nicos a los usuarios.
Utiliza la informaci贸n proporcionada en el cuerpo de la solicitud para personalizar el correo.
Retorna un mensaje de 茅xito o error, dependiendo del resultado del env铆o del correo.

Flujo:

Recibe la solicitud con los datos necesarios para enviar un correo electr贸nico.
Valida la presencia de los campos requeridos en el cuerpo de la solicitud.
Prepara la informaci贸n del usuario y el mensaje del correo.
Utiliza la funci贸n sendEmail del manejador de correo electr贸nico para enviar el correo.
En caso de 茅xito, retorna un mensaje indicando que el correo se ha enviado correctamente. En caso de error, retorna un mensaje de error.

 **payments/createOrder**

Funcionalidad:

Este controlador se encarga de crear una orden de pago utilizando MercadoPago.
Realiza validaciones de datos y autorizaci贸n del usuario.
Crea preferencias de pago y registra la orden en la base de datos.

Flujo:

Recibe la solicitud con la informaci贸n del usuario y los elementos de la orden.
Valida la presencia de los campos requeridos y el formato del ID del usuario.
Verifica la existencia y estado activo del usuario en la base de datos.
Valida y procesa los elementos de la orden mediante la funci贸n validateItems.
Utiliza la funci贸n createPreferences para obtener la respuesta de MercadoPago con el enlace de pago.
Crea una entrada de orden en la base de datos con la informaci贸n de la orden y el ID externo proporcionado por MercadoPago.
Retorna la respuesta de MercadoPago con el enlace de pago.

 **payments/updateOrder**

Funcionalidad:

Este controlador se encarga de manejar las actualizaciones de estado de las 贸rdenes de pago.
Actualiza el estado de las 贸rdenes en la base de datos y notifica al usuario mediante correo electr贸nico.
Flujo:

Recibe la solicitud con los par谩metros de actualizaci贸n de la orden desde MercadoPago.
Utiliza la funci贸n updateOrderHandler para actualizar el estado de la orden en la base de datos.
Utiliza la funci贸n getOrderOwner para obtener la informaci贸n del propietario de la orden.
Selecciona el mensaje de correo electr贸nico correspondiente seg煤n el estado de la orden (aprobada, pendiente o fallida).
Utiliza la funci贸n sendEmail para enviar un correo electr贸nico al usuario notific谩ndole sobre el estado de la orden.
Redirige a la p谩gina principal de la aplicaci贸n.
 
 **products/deleteProductById**
Funcionalidad:

Elimina un producto de la base de datos seg煤n el ID proporcionado.
Retorna el producto eliminado si se encuentra, o un mensaje indicando que el producto no fue encontrado.
Flujo:

Recibe la solicitud con el ID del producto a eliminar.
Busca el producto en la base de datos utilizando el ID.
Si el producto no se encuentra, retorna un mensaje indicando que el producto no fue encontrado.
Si el producto se encuentra, lo elimina de la base de datos.
Retorna el producto eliminado.

 **products/getProductByID**
Funcionalidad:

Obtiene un producto de la base de datos seg煤n el ID proporcionado.
Retorna el producto encontrado o un mensaje indicando que el producto no fue encontrado.
Flujo:

Recibe la solicitud con el ID del producto a obtener.
Busca el producto en la base de datos utilizando el ID.
Si el producto no se encuentra, retorna un mensaje indicando que el producto no fue encontrado.
Si el producto se encuentra, retorna el producto.

 **products/getProducts**

Funcionalidad:

Obtiene la lista de todos los productos o aquellos que coincidan con un nombre espec铆fico.
Realiza una b煤squeda de productos seg煤n el nombre proporcionado en la consulta.
Retorna la lista de productos encontrados.
Flujo:

Recibe la solicitud, verifica si se proporciona un nombre en la consulta.
Si se proporciona un nombre, realiza una b煤squeda de productos que coincidan con el nombre.
Si no se proporciona un nombre, obtiene la lista completa de productos.
Retorna la lista de productos encontrados.

**products/postProducts**

Funcionalidad:

Crea un nuevo producto en la base de datos.
Realiza validaciones de atributos y verifica la no existencia previa del producto.
Retorna el producto creado o un mensaje indicando que el producto ya existe.
Flujo:

Recibe la solicitud con la informaci贸n del nuevo producto.
Valida la presencia de todos los atributos requeridos y la ausencia de valores nulos o vac铆os.
Verifica si ya existe un producto con el mismo nombre en la base de datos.
Si el producto no existe, crea el nuevo producto en la base de datos.
Retorna el producto creado o un mensaje indicando que el producto ya existe.

**products/updateProduct**

Funcionalidad:

Actualiza la informaci贸n de un producto en la base de datos seg煤n el ID proporcionado.
Retorna el producto actualizado o un mensaje indicando que el producto no fue encontrado.
Flujo:

Recibe la solicitud con el ID del producto a actualizar y la nueva informaci贸n.
Busca el producto en la base de datos utilizando el ID.
Si el producto no se encuentra, retorna un mensaje indicando que el producto no fue encontrado.
Si el producto se encuentra, actualiza su informaci贸n en la base de datos.
Retorna el producto actualizado.

 **reviews/changeDisplay**
Funcionalidad:

Actualiza la propiedad display de una revisi贸n en la base de datos seg煤n el ID proporcionado.
Retorna la revisi贸n actualizada o un mensaje indicando que la revisi贸n no fue encontrada.
Flujo:

Recibe la solicitud con el ID de la revisi贸n a actualizar y la nueva informaci贸n.
Busca la revisi贸n en la base de datos utilizando el ID.
Si la revisi贸n no se encuentra, retorna un mensaje indicando que la revisi贸n no fue encontrada.
Si la revisi贸n se encuentra, actualiza la propiedad display en la base de datos.
Retorna la revisi贸n actualizada.

**reviews/createReview**
Funcionalidad:

Crea una nueva revisi贸n en la base de datos.
Realiza validaciones de atributos y verifica la no existencia previa de la revisi贸n.
Retorna la revisi贸n creada o un mensaje indicando que la revisi贸n ya existe.
Flujo:

Recibe la solicitud con la informaci贸n de la nueva revisi贸n.
Valida la presencia de todos los atributos requeridos y la ausencia de valores nulos o vac铆os.
Verifica si ya existe una revisi贸n con el mismo userServicesID en la base de datos.
Si la revisi贸n no existe, crea la nueva revisi贸n en la base de datos.
Retorna la revisi贸n creada o un mensaje indicando que la revisi贸n ya existe.

**reviews/deleteReview**
Funcionalidad:

Elimina una revisi贸n de la base de datos seg煤n el ID proporcionado.
Retorna un mensaje indicando que la revisi贸n fue eliminada o que no se encontr贸.
Flujo:

Recibe la solicitud con el ID de la revisi贸n a eliminar.
Busca la revisi贸n en la base de datos utilizando el ID.
Si la revisi贸n no se encuentra, retorna un mensaje indicando que la revisi贸n no fue encontrada.
Si la revisi贸n se encuentra, la elimina de la base de datos.
Retorna un mensaje indicando que la revisi贸n fue eliminada.

 **reviews/getReviews**
Funcionalidad:

Obtiene la lista de revisiones seg煤n los filtros proporcionados.
Realiza una b煤squeda de revisiones en base a los filtros de usuario, servicio, tiempo y estado.
Retorna la lista de revisiones encontradas.
Flujo:

Recibe la solicitud con los filtros proporcionados.
Construye las opciones de consulta en base a los filtros recibidos.
Realiza una b煤squeda de revisiones en base a los filtros.
Retorna la lista de revisiones encontradas.

 **services/createService**

Funcionalidad:

Crea un nuevo servicio en la base de datos.
Realiza validaciones de atributos y verifica la no existencia previa del servicio.
Asigna coaches al servicio a trav茅s de la tabla intermedia ServiceCoach.
Retorna el servicio creado o un mensaje indicando que el servicio ya existe.
Flujo:

Recibe la solicitud con la informaci贸n del nuevo servicio.
Valida la presencia de todos los atributos requeridos y la ausencia de valores nulos o vac铆os.
Realiza validaciones de tipos y formatos para algunos atributos (precio, hora de inicio, duraci贸n, etc.).
Valida la unicidad del nombre del servicio en la base de datos.
Crea el nuevo servicio en la base de datos.
Asigna los coaches al servicio a trav茅s de la tabla intermedia ServiceCoach.
Retorna el servicio creado o un mensaje indicando que el servicio ya existe.

 **services/deleteServiceById**
Funcionalidad:

Elimina un servicio de la base de datos seg煤n el ID proporcionado.
Retorna un mensaje indicando que el servicio fue eliminado o que no se encontr贸.
Flujo:

Recibe la solicitud con el ID del servicio a eliminar.
Valida que el ID tenga el formato correcto de UUID.
Busca el servicio en la base de datos utilizando el ID.
Si el servicio no se encuentra, retorna un mensaje indicando que el servicio no fue encontrado.
Si el servicio se encuentra, lo elimina de la base de datos.
Retorna un mensaje indicando que el servicio fue eliminado.

 **services/getAllServices**
Funcionalidad:

Obtiene la lista de servicios seg煤n los filtros proporcionados.
Realiza b煤squedas y filtrados en base a los par谩metros recibidos.
Aplica paginaci贸n y ordenamiento en los resultados.
Retorna la lista de servicios encontrados.
Flujo:

Recibe la solicitud con los filtros, paginaci贸n y ordenamiento proporcionados.
Construye las opciones de consulta en base a los filtros recibidos.
Realiza la b煤squeda de servicios en base a las opciones configuradas.
Retorna la lista de servicios encontrados.

**services/getServiceById**
Funcionalidad:

Obtiene un servicio espec铆fico de la base de datos seg煤n el ID proporcionado.
Retorna el servicio encontrado o un mensaje indicando que no se encontr贸.
Flujo:

Recibe la solicitud con el ID del servicio a obtener.
Valida que el ID tenga el formato correcto de UUID.
Busca el servicio en la base de datos utilizando el ID.
Si el servicio no se encuentra, retorna un mensaje indicando que el servicio no fue encontrado.
Si el servicio se encuentra, lo retorna.

 **services/updateService**
Funcionalidad:

Actualiza la informaci贸n de un servicio en la base de datos seg煤n el ID proporcionado.
Realiza validaciones de tipos, formatos y unicidad durante la actualizaci贸n.
Retorna el servicio actualizado o un mensaje indicando un error.
Flujo:

Recibe la solicitud con el ID del servicio a actualizar y la nueva informaci贸n.
Realiza validaciones de tipos y formatos para algunos atributos (precio, hora de inicio, duraci贸n, etc.).
Valida la unicidad del nombre del servicio en la base de datos.
Busca el servicio en la base de datos utilizando el ID.
Si el servicio no se encuentra, retorna un mensaje indicando que el servicio no fue encontrado.
Si el servicio se encuentra, actualiza la informaci贸n en la base de datos.
Retorna el servicio actualizado o un mensaje indicando un error.

**user/createUser**
Funcionalidad:

Crea un nuevo usuario en la base de datos.
Realiza validaciones de atributos y verifica la no existencia previa del usuario.
Si el usuario se crea a trav茅s de Auth0, se utiliza la informaci贸n proporcionada por Auth0.
Retorna el usuario creado o un mensaje indicando que el usuario ya existe.
Flujo:

Recibe la solicitud con la informaci贸n del nuevo usuario.
Si el usuario se crea a trav茅s de Auth0, obtiene el ID de usuario y genera un UUID 煤nico.
Realiza validaciones de atributos y tipos de datos.
Si el usuario se crea a trav茅s de Auth0, verifica la no existencia del usuario por UUID o email.
Crea el nuevo usuario en la base de datos.
Retorna el usuario creado o un mensaje indicando que el usuario ya existe.

 **user/deleteUserById**

Funcionalidad:

Elimina un usuario de la base de datos seg煤n el ID proporcionado.
Verifica si el usuario que realiza la solicitud es un administrador antes de permitir la eliminaci贸n.
Retorna un mensaje indicando que el usuario fue eliminado o que no se encontr贸.
Flujo:

Recibe la solicitud con el ID del usuario a eliminar.
Obtiene el ID de usuario de Auth0 desde la informaci贸n del token.
Verifica si el usuario que realiza la solicitud es un administrador.
Si el usuario no es un administrador, retorna un mensaje indicando que solo los administradores pueden realizar esta acci贸n.
Si el usuario es un administrador, valida que el ID tenga el formato correcto de UUID.
Busca el usuario en la base de datos utilizando el ID.
Si el usuario no se encuentra, retorna un mensaje indicando que el usuario no fue encontrado.
Si el usuario se encuentra, lo elimina de la base de datos.
Retorna un mensaje indicando que el usuario fue eliminado.

**user/getAllUsers**
Funcionalidad:

Obtiene la lista de usuarios seg煤n los filtros proporcionados.
Realiza b煤squedas y filtrados en base a los par谩metros recibidos.
Aplica paginaci贸n y ordenamiento en los resultados.
Retorna la lista de usuarios encontrados.
Flujo:

Recibe la solicitud con los filtros, paginaci贸n y ordenamiento proporcionados.
Construye las opciones de consulta en base a los filtros recibidos.
Realiza la b煤squeda de usuarios en base a las opciones configuradas.
Retorna la lista de usuarios encontrados.


**user/getUserById**
Funcionalidad:

Obtiene un usuario espec铆fico de la base de datos seg煤n el ID proporcionado.
Retorna el usuario encontrado o un mensaje indicando que no se encontr贸.
Flujo:

Recibe la solicitud con el ID del usuario a obtener.
Obtiene el ID de usuario de Auth0 desde la informaci贸n del token.
Valida que el ID tenga el formato correcto de UUID.
Busca el usuario en la base de datos utilizando el ID.
Si el usuario no se encuentra, retorna un mensaje indicando que el usuario no fue encontrado.
Si el usuario se encuentra, lo retorna.

**user/getUserFavorites**
Funcionalidad:

Obtiene la lista de productos y servicios favoritos de un usuario.
Retorna un array con informaci贸n resumida de los productos y servicios favoritos.
Flujo:

Recibe la solicitud con el ID del usuario cuyos favoritos se desean obtener.
Obtiene el ID de usuario de Auth0 desde la informaci贸n del token.
Valida que el ID tenga el formato correcto de UUID.
Busca el usuario en la base de datos utilizando el ID.
Si el usuario no se encuentra, retorna un mensaje indicando que el usuario no fue encontrado.
Para cada producto favorito, obtiene la informaci贸n resumida y agrega a un array con el tipo "prod".
Para cada servicio favorito, obtiene la informaci贸n resumida y agrega a un array con el tipo "serv".
Combina ambos arrays y retorna la lista de productos y servicios favoritos.

**user/updateUser**
Funcionalidad:

Actualiza la informaci贸n de un usuario en la base de datos seg煤n el ID proporcionado.
Realiza validaciones de tipos, formatos y unicidad durante la actualizaci贸n.
Retorna el usuario actualizado o un mensaje indicando un error.
Flujo:

Recibe la solicitud con el ID del usuario a actualizar y la nueva informaci贸n.
Obtiene el ID de usuario de Auth0 desde la informaci贸n del token.
Valida que el ID tenga el formato correcto de UUID.
Busca el usuario en la base de datos utilizando el ID.
Si el usuario no se encuentra, retorna un mensaje indicando que el usuario no fue encontrado.
Realiza validaciones de tipos y formatos para algunos atributos (email, fecha de nacimiento, fecha de inscripci贸n, etc.).
Si se actualiza el email, verifica la unicidad del email en la base de datos.
Si se actualiza el tel茅fono, verifica la unicidad del tel茅fono en la base de datos.
Si se actualizan favoritos, realiza la operaci贸n correspondiente (agregar o quitar).
Actualiza la informaci贸n del usuario en la base de datos.
Retorna el usuario actualizado o un mensaje indicando un error.


**userProducts/createUserProduct**
Funcionalidad:

Crea un nuevo registro de producto para un usuario en la base de datos.
Realiza validaciones de datos y verifica la existencia de usuario y producto.
Retorna el registro creado o un mensaje de error.
Flujo:

Recibe la solicitud con la informaci贸n del nuevo registro de producto para un usuario.
Realiza validaciones para garantizar que todos los campos requeridos est茅n presentes.
Busca el usuario y el producto en la base de datos utilizando los IDs proporcionados.
Si el usuario o el producto no se encuentran, retorna un mensaje indicando que no se encontr贸 el usuario o el producto.
Crea el nuevo registro de producto para el usuario en la base de datos.
Retorna el registro creado o un mensaje de error.

 **userProducts/deleteUserProductById**
Funcionalidad:

Elimina un registro de producto para un usuario seg煤n el ID proporcionado.
Retorna un mensaje indicando que el registro fue eliminado o que no se encontr贸.
Flujo:

Recibe la solicitud con el ID del registro de producto a eliminar.
Busca el registro de producto en la base de datos utilizando el ID.
Si el registro de producto no se encuentra, retorna un mensaje indicando que no se encontr贸 el registro.
Elimina el registro de producto de la base de datos.
Retorna un mensaje indicando que el registro fue eliminado.

 **userProducts/getAllUserProducts**
Funcionalidad:

Obtiene la lista de todos los registros de productos para usuarios seg煤n los filtros proporcionados.
Realiza b煤squedas y filtrados en base a los par谩metros recibidos.
Aplica paginaci贸n y ordenamiento en los resultados.
Retorna la lista de registros de productos encontrados.
Flujo:

Recibe la solicitud con los filtros, paginaci贸n y ordenamiento proporcionados.
Construye las opciones de consulta en base a los filtros recibidos.
Realiza la b煤squeda de registros de productos en base a las opciones configuradas.
Retorna la lista de registros de productos encontrados.

 **userProducts/getUserProductById**
Funcionalidad:

Obtiene un registro de producto para un usuario seg煤n el ID proporcionado.
Retorna el registro de producto encontrado o un mensaje indicando que no se encontr贸.
Flujo:

Recibe la solicitud con el ID del registro de producto a obtener.
Busca el registro de producto en la base de datos utilizando el ID.
Si el registro de producto no se encuentra, retorna un mensaje indicando que no se encontr贸 el registro.
Retorna el registro de producto encontrado.

**userProducts/updateUserProduct**
Funcionalidad:

Actualiza la informaci贸n de un registro de producto para un usuario seg煤n el ID proporcionado.
Retorna el registro de producto actualizado o un mensaje de error.
Flujo:

Recibe la solicitud con el ID del registro de producto a actualizar y la nueva informaci贸n.
Busca el registro de producto en la base de datos utilizando el ID.
Si el registro de producto no se encuentra, retorna un mensaje indicando que no se encontr贸 el registro.
Actualiza la informaci贸n del registro de producto en la base de datos.
Retorna el registro de producto actualizado o un mensaje de error.

**userServices/createUserService**
Funcionalidad:

Crea un nuevo registro de servicio para un usuario en la base de datos.
Realiza validaciones de datos y verifica la existencia de usuario y servicio.
Retorna el registro creado o un mensaje de error.
Flujo:

Recibe la solicitud con la informaci贸n del nuevo registro de servicio para un usuario.
Realiza validaciones para garantizar que todos los campos requeridos est茅n presentes.
Busca el usuario y el servicio en la base de datos utilizando los IDs proporcionados.
Si el usuario o el servicio no se encuentran, retorna un mensaje indicando que no se encontr贸 el usuario o el servicio.
Crea el nuevo registro de servicio para el usuario en la base de datos.
Retorna el registro creado o un mensaje de error.

**userServices/deleteUserServiceById**

Funcionalidad:

Elimina un registro de servicio para un usuario seg煤n el ID proporcionado.
Retorna un mensaje indicando que el registro fue eliminado o que no se encontr贸.
Flujo:

Recibe la solicitud con el ID del registro de servicio a eliminar.
Busca el registro de servicio en la base de datos utilizando el ID.
Si el registro de servicio no se encuentra, retorna un mensaje indicando que no se encontr贸 el registro.
Elimina el registro de servicio de la base de datos.
Retorna un mensaje indicando que el registro fue eliminado.

**userServices/getAllUserServices**
Funcionalidad:

Obtiene la lista de todos los registros de servicios para usuarios seg煤n los filtros proporcionados.
Realiza b煤squedas y filtrados en base a los par谩metros recibidos.
Aplica paginaci贸n y ordenamiento en los resultados.
Retorna la lista de registros de servicios encontrados.
Flujo:

Recibe la solicitud con los filtros, paginaci贸n y ordenamiento proporcionados.
Construye las opciones de consulta en base a los filtros recibidos.
Realiza la b煤squeda de registros de servicios en base a las opciones configuradas.
Retorna la lista de registros de servicios encontrados.

 **userServices/getUserServiceById**
Funcionalidad:

Obtiene un registro de servicio para un usuario seg煤n el ID proporcionado.
Retorna el registro de servicio encontrado o un mensaje indicando que no se encontr贸.
Flujo:

Recibe la solicitud con el ID del registro de servicio a obtener.
Busca el registro de servicio en la base de datos utilizando el ID.
Si el registro de servicio no se encuentra, retorna un mensaje indicando que no se encontr贸 el registro.
Retorna el registro de servicio encontrado.

 **userServices/sendBulkEmails**
Funcionalidad:

Env铆a correos electr贸nicos masivos a los usuarios cuyos servicios cumplen con ciertos criterios.
Obtiene los servicios seg煤n los filtros proporcionados.
Retorna un mensaje indicando que los correos electr贸nicos fueron enviados correctamente.
Flujo:

Recibe la solicitud con los filtros proporcionados y la informaci贸n del mensaje.
Obtiene los servicios seg煤n los filtros configurados.
Env铆a correos electr贸nicos masivos a los usuarios asociados a los servicios obtenidos.
Retorna un mensaje indicando que los correos electr贸nicos fueron enviados correctamente.

 **userServices/updateUserService**
Funcionalidad:

Actualiza la informaci贸n de un registro de servicio para un usuario seg煤n el ID proporcionado.
Retorna el registro de servicio actualizado o un mensaje de error.
Flujo:

Recibe la solicitud con el ID del registro de servicio a actualizar y la nueva informaci贸n.
Busca el registro de servicio en la base de datos utilizando el ID.
Si el registro de servicio no se encuentra, retorna un mensaje indicando que no se encontr贸 el registro.
Actualiza la informaci贸n del registro de servicio en la base de datos.
Retorna el registro de servicio actualizado o un mensaje de error.

**logica y funcionamiento de los otros compoentes - controller**

 **sendWsMessage.controller.js**
Funcionalidad:
Env铆a mensajes a trav茅s de WhatsApp utilizando la API de WhatsApp Business.
Logica:
Recepci贸n de solicitud:

Recibe una solicitud HTTP con la informaci贸n necesaria para enviar un mensaje a trav茅s de WhatsApp.
Validaci贸n de datos:

Verifica que la solicitud contenga la informaci贸n necesaria, como el n煤mero de tel茅fono y el mensaje.
Generaci贸n de mensaje:

Construye el objeto de mensaje a enviar, que generalmente incluir谩 el n煤mero de tel茅fono de destino, el cuerpo del mensaje y cualquier otra informaci贸n relevante.
Env铆o del mensaje:

Utiliza la API de WhatsApp Business para enviar el mensaje al n煤mero de tel茅fono proporcionado.
Maneja cualquier error o respuesta de la API y registra la informaci贸n seg煤n sea necesario.
Respuesta HTTP:

Retorna una respuesta HTTP indicando el 茅xito o el fracaso del env铆o del mensaje.
Flujo:

Inicio:
La solicitud HTTP llega al endpoint correspondiente del servidor.
Validaci贸n:

Se verifica que la solicitud contenga la informaci贸n necesaria y v谩lida para enviar un mensaje.
Generaci贸n de mensaje:

Se crea un objeto de mensaje que contiene el n煤mero de tel茅fono de destino, el cuerpo del mensaje y cualquier otra informaci贸n necesaria.
Env铆o del mensaje:

El sistema utiliza la API de WhatsApp Business para enviar el mensaje al n煤mero de tel茅fono especificado.
Manejo de errores:

Se manejan cualquier error o respuesta inesperada de la API de WhatsApp Business.
Respuesta HTTP:

Se retorna una respuesta HTTP indicando el resultado del intento de enviar el mensaje.

**logica y funcionamiento del Handler**


 **sendEmail**
Funcionalidad y Flujo:
Funcionalidad:

Env铆a correos electr贸nicos utilizando Nodemailer.
Utiliza una plantilla de mensaje para construir el contenido del correo.
Flujo:

Entrada:

userData: Contiene informaci贸n del destinatario (nombre, apellido, correo).
messageData: Contiene informaci贸n del mensaje (asunto, cuerpo, enlace).
Preparaci贸n del Mensaje:

Extrae la informaci贸n necesaria de userData y messageData para construir el contenido del correo.
Utiliza una plantilla de mensaje para generar el cuerpo HTML del correo.
Configuraci贸n del Transporte:

Configura el transporte para el env铆o de correo utilizando Nodemailer.
La configuraci贸n incluye el host, puerto, credenciales de autenticaci贸n, y configuraci贸n TLS.
Creaci贸n del Mensaje:

Crea un objeto de mensaje con informaci贸n como el remitente, destinatario, asunto y cuerpo del mensaje.

Env铆o del Correo:

Utiliza el transporte configurado para enviar el correo electr贸nico.
Retorna el resultado del env铆o.
Salida:

La funci贸n retorna una promesa que se resuelve con el resultado del env铆o del correo.


**createOrders**

 Funcionalidad y Flujo:
Funcionalidad:

Crea 贸rdenes en la base de datos en funci贸n de los productos y servicios comprados.
Reduce el stock de productos disponibles y actualiza los asientos disponibles para servicios.
Flujo:

Entrada:

userId: Identificador del usuario que realiza la compra.
items: Lista de productos y servicios que se est谩n comprando.
external_reference: Identificador 煤nico para asociar transacciones.
Iteraci贸n sobre Items:

Para cada 铆tem en la lista de compras:
Se obtiene el producto o servicio correspondiente de la base de datos.
Se verifica si es un producto o servicio.
Se reduce el stock del producto y se crea una entrada en la tabla UserProducts o UserServices seg煤n corresponda.
Salida:

No hay un resultado directo que se retorne; la funci贸n realiza cambios en la base de datos.

 **createPreferences**

Funcionalidad y Flujo:

Funcionalidad:

Crea preferencias para la integraci贸n con MercadoPago, generando el link de pago.
Asocia una transacci贸n mediante un external_reference 煤nico.
Flujo:

Entrada:

req: Objeto de solicitud HTTP.
items: Lista de productos y servicios que se est谩n comprando.
Construcci贸n de Items para MercadoPago:

Se construye una lista de 铆tems adecuada para MercadoPago a partir de la informaci贸n de los productos y servicios.
Configuraci贸n de Preferencias:

Se configuran las preferencias de pago, incluyendo las URLs de redirecci贸n y el external_reference.
Creaci贸n de Preferencias en MercadoPago:

Se utiliza la API de MercadoPago para crear las preferencias y obtener la respuesta.
Salida:

La funci贸n retorna un objeto que contiene la respuesta de MercadoPago y el external_reference.

 **getOrderOwner**
Funcionalidad y Flujo:

Funcionalidad:

Obtiene al propietario de una orden a partir del mp_external_reference.
Flujo:

Entrada:

mp_external_reference: Identificador 煤nico de transacci贸n.
B煤squeda de Orden:

Se busca una orden en las tablas UserProducts o UserServices utilizando el mp_external_reference.
Obtenci贸n del Propietario:

Se obtiene al propietario de la orden mediante el identificador de usuario (userID).
Salida:

La funci贸n retorna un objeto de usuario (User).

 **updateOrder**
Funcionalidad y Flujo:

Funcionalidad:

Actualiza informaci贸n de una orden con datos provenientes de MercadoPago.
Flujo:

Entrada:

data: Objeto con informaci贸n proveniente de MercadoPago (id de pago, estado, id de orden, etc.).
Actualizaci贸n de UserProducts y UserServices:

Se actualiza la informaci贸n relacionada con la orden en las tablas UserProducts y UserServices utilizando el mp_external_reference.
Salida:

No hay un resultado directo que se retorne; la funci贸n realiza cambios en la base de datos.

 **validateItem**
Funcionalidad y Flujo:

Funcionalidad:

Valida la informaci贸n de un 铆tem (producto o servicio) antes de procesar una orden.
Flujo:

Entrada:

item: Informaci贸n del 铆tem a validar.
Validaciones:

Se realizan diversas validaciones, como:
Existencia y formato correcto de campos.
Validez de fechas para servicios.
Suficiente stock para productos.
Disponibilidad de asientos para servicios.
Salida:

No hay un resultado directo que se retorne; la funci贸n arroja errores si la validaci贸n no es exitosa.

 **validateItems**
Funcionalidad y Flujo:

Funcionalidad:

Valida la lista de 铆tems antes de procesar una orden.
Flujo:

Entrada:

items: Lista de productos y servicios a validar.
Iteraci贸n y Validaci贸n:

Se itera sobre cada 铆tem y se utiliza la funci贸n validateItem para validar individualmente.
Salida:

No hay un resultado directo que se retorne; la funci贸n arroja errores si la validaci贸n no es exitosa.

 **sendBulkEmail**
Funcionalidad y Flujo:
Funcionalidad:

Env铆a correos electr贸nicos a m煤ltiples destinatarios con un mensaje com煤n.
Flujo:

Entrada:

orders: Lista de 贸rdenes de usuario que se utilizar谩n para obtener informaci贸n del destinatario.
messageData: Contiene informaci贸n del mensaje (asunto, cuerpo, enlace).
Iteraci贸n y Env铆o de Correos:

Para cada orden en la lista, se extrae la informaci贸n del destinatario y se env铆a un correo electr贸nico utilizando la funci贸n sendEmail.

Salida:
No hay un resultado directo que se retorne; la funci贸n realiza el env铆o de correos electr贸nicos.

 **sendWsMessage**

Funcionalidad y Flujo:
Funcionalidad:

Env铆a mensajes a trav茅s de WhatsApp utilizando la API de Twilio.
Flujo:

Entrada:

userData: Contiene informaci贸n del destinatario (n煤mero de tel茅fono).
messageData: Contiene informaci贸n del mensaje (cuerpo).
Configuraci贸n del Mensaje:

Se configura el mensaje con el cuerpo y los n煤meros de tel茅fono del remitente y destinatario.
Env铆o del Mensaje:

Se utiliza la API de Twilio para enviar el mensaje a trav茅s de WhatsApp.
Salida:

La funci贸n retorna un objeto que contiene la informaci贸n del mensaje enviado.


**la importancia de la carpeta utils**

La carpeta utils en la aplicaci贸n backend generalmente se va a utilizar para almacenar funciones y utilidades reutilizables en diversos lugares del c贸digo. Estas funciones pueden abordar tareas comunes, como validaciones, formateo de datos, manipulaci贸n de fechas, y otras operaciones que se repiten en diferentes partes de la aplicaci贸n. de esta manera se esta utilizando los archivos en la carpeta utils:

**Validaciones y Formateo:**

validateSimpleDate, isValidEmail, isValidPhoneNumber, isValidHourMinuteFormat, isValidUUID, isValidImageUrl, parseIntStrict, isStringLengthInRange, isValidPositiveInteger, isValidPositiveNumber: Estas funciones parecen estar destinadas a validar diferentes tipos de datos, como fechas, direcciones de correo electr贸nico, n煤meros de tel茅fono, etc. Son 煤tiles para garantizar que los datos ingresados en la aplicaci贸n cumplan con ciertos criterios.

 **Funciones de Comparaci贸n:**

**arrayEquals:** Compara dos arrays para verificar si son iguales. Esto puede ser 煤til en situaciones donde necesitas verificar si dos conjuntos de datos son id茅nticos.
Funciones de Autenticaci贸n y Autorizaci贸n:

**AuthUtils.js:** Contiene funciones relacionadas con la autenticaci贸n, como verificar si un usuario es un administrador y obtener un UUID 煤nico del usuario. Estas funciones son cruciales para la gesti贸n de permisos y roles en la aplicaci贸n.
Otras Utilidades Generales:

 **toTitle:** Probablemente, esta funci贸n se utiliza para convertir cadenas de texto a formato de t铆tulo.
Exportaci贸n Conjunta:

**index.js:** Combina todas las funciones de los archivos individuales en un solo objeto, facilitando su importaci贸n en otras partes del c贸digo. Esto permite que el c贸digo sea m谩s modular y f谩cil de mantener.
En resumen, la carpeta utils centraliza funciones comunes y utilidades que pueden ser utilizadas en diferentes partes de la aplicaci贸n, promoviendo la reutilizaci贸n del c贸digo y facilitando la mantenibilidad. Adem谩s, proporciona un lugar organizado para funciones que no necesariamente pertenecen

 **funcionalidad y flujo**

 **checkUserServices**
Funcionalidad:

Verifica los servicios de usuario que est谩n a punto de expirar o tienen una notificaci贸n de d铆as y env铆a correos electr贸nicos a los usuarios correspondientes.
Flujo:

Obtenci贸n de Datos:

Utiliza la consulta en la base de datos con el filtro para obtener los servicios de usuario que cumplen con las condiciones de expiraci贸n o notificaci贸n de d铆as.
Utiliza la funci贸n getUserServicesOptions para construir las opciones de consulta.
Env铆o de Correos Electr贸nicos:

Utiliza la funci贸n sendBulkEmails para enviar correos electr贸nicos a los usuarios de los servicios obtenidos.
Proporciona un mensaje de prueba (messageData) con asunto, cuerpo y enlace.
Programaci贸n de Tarea:

Utiliza node-cron para programar la ejecuci贸n de checkUserServices en una fecha y hora espec铆ficas.
Salida:

No hay un resultado directo que se retorne; la funci贸n realiza env铆os de correos electr贸nicos seg煤n las condiciones establecidas.

mails

**message.js**
Funcionalidad:

Define una plantilla HTML para mensajes de correo electr贸nico con variables como el nombre del usuario, el cuerpo del mensaje y un enlace.
Flujo:

Entradas:

firstName: Nombre del usuario.
lastName: Apellido del usuario.
html: Cuerpo del mensaje.
link: Enlace adjunto al mensaje.
Generaci贸n de HTML:

Utiliza los par谩metros de entrada para construir el cuerpo HTML del mensaje.
Salida:

Retorna la plantilla HTML completa como una cadena de texto.

 **samples.js**
Funcionalidad:

Define ejemplos de mensajes de correo electr贸nico para diferentes estados de una orden.
Flujo:

Proporciona mensajes de ejemplo para situaciones de 茅xito, fallo y pendientes, as铆 como mensajes relacionados con servicios a punto de expirar o ya expirados.

Carpeta de pagination:

 **setoffsetAndLimit.js**
Funcionalidad:

Establece el offset y el l铆mite para la paginaci贸n de consultas.
Flujo:

Entradas:

page: N煤mero de p谩gina.
limit: Tama帽o de la p谩gina (opcional, por defecto es 10).
Validaciones:

Verifica que page y limit sean n煤meros positivos.
C谩lculo de Offset y L铆mite:

Calcula el offset multiplicando el n煤mero de p谩gina menos uno por el l铆mite.
Usa el l铆mite proporcionado o un valor predeterminado de 10 si no se proporciona.
Salida:

Retorna un objeto con offset y limit para ser utilizado en consultas de paginaci贸n.

Carpeta de services:

 **setUpFilters.js**
Funcionalidad:

Configura los filtros para consultas de servicios.
Flujo:

Validaciones:

Verifica y valida formatos para campos como startTime, endTime, startDuration, endDuration, minCapacity, maxCapacity.
Configuraci贸n de Filtros:

Construye un objeto con filtros seg煤n los par谩metros proporcionados.
Salida:

Retorna el objeto de filtros configurado.

 **setUpSorting.js**
Funcionalidad:

Configura el orden para consultas de servicios.
Flujo:

Configuraci贸n de Orden:

Utiliza las condiciones proporcionadas para determinar el orden en el que se deben devolver los resultados.
Salida:

Retorna una lista de campos y direcciones para ser utilizados en la cl谩usula order de la consulta.
Carpeta de users:

**setFilters.js**
Funcionalidad:

Configura los filtros para consultas de usuarios.
Flujo:

Validaciones:

Valida formatos para campos como startDate y endDate.
Configuraci贸n de Filtros:

Construye un objeto con filtros seg煤n los par谩metros proporcionados.
Salida:

Retorna el objeto de filtros configurado.

 **setUpSorting.js**
Funcionalidad:

Configura el orden para consultas de usuarios.
Flujo:

Configuraci贸n de Orden:

Utiliza las condiciones proporcionadas para determinar el orden en el que se deben devolver los resultados.
Salida:

Retorna una lista de campos y direcciones para ser utilizados en la cl谩usula order de la consulta.

Carpeta de userServices:

 **arrayEquals.js**
Funcionalidad:

Compara dos arrays para determinar si son iguales.
Flujo:

Compara longitud y elementos de los arrays despu茅s de ordenarlos.

Salida:

Retorna true si los arrays son iguales, false de lo contrario.

 **uthUtils.js**
Funcionalidad:

Contiene funciones relacionadas con la autenticaci贸n y permisos de usuario.
Flujo:

isAdmin(userID): Verifica si un usuario tiene el rol de administrador.

getUUID(auth0User): Obtiene el UUID 煤nico del usuario a partir de la informaci贸n de autenticaci贸n.

Salida:

Retorna true o false para isAdmin, y un UUID para getUUID.

 **index.js**
Funcionalidad:

Combina y exporta utilidades de varios archivos.
Flujo:

Utiliza el operador spread para combinar las funciones de m煤ltiples archivos.

Salida:

Exporta un objeto con todas las funciones utilitarias combinadas.

**la importancia de la validaciones**

Integridad de Datos:

Las validaciones aseguran que los datos ingresados en la aplicaci贸n cumplan con ciertos criterios y formatos predefinidos.

Seguridad:

Validar los datos ayuda a prevenir ataques comunes, como inyecciones de c贸digo o manipulaci贸n de datos.

Experiencia del Usuario:

Proporcionan retroalimentaci贸n inmediata al usuario sobre la correcci贸n de los datos ingresados, mejorando la experiencia del usuario.

Prevenci贸n de Errores:

Ayudan a evitar errores comunes o malentendidos al garantizar que los datos est茅n en el formato correcto antes de ser procesados.

Consistencia en la Base de Datos:

Contribuyen a mantener la consistencia de los datos en la base de datos al aplicar reglas espec铆ficas.

Conformidad con Requisitos de Negocio:

Las validaciones pueden garantizar que los datos cumplen con los requisitos espec铆ficos del negocio y del dominio de la aplicaci贸n.

Prevenci贸n de Vulnerabilidades:

Ayudan a prevenir la entrada de datos maliciosos que podr铆an explotar vulnerabilidades en el sistema.

Optimizaci贸n del Rendimiento:

Al garantizar que los datos sean v谩lidos desde el principio, se evitan procesamientos innecesarios y se optimiza el rendimiento.

Compatibilidad con Sistemas Externos:

En entornos donde se interact煤a con sistemas externos, las validaciones aseguran que los datos cumplan con los est谩ndares necesarios para la interoperabilidad.

Debugging M谩s Sencillo:

Las validaciones claras y espec铆ficas facilitan la identificaci贸n y correcci贸n de errores, ya que indican exactamente d贸nde se produjo la falla.

Mantenimiento Simplificado:

Al centralizar las reglas de validaci贸n, se facilita el mantenimiento y la actualizaci贸n de estas reglas en toda la aplicaci贸n.

**logica y funcionalidad de cada una de las validaciones**

**arrayEquals.js:**

Funcionalidad: Compara dos arrays para verificar si son iguales.
L贸gica:
Verifica si la longitud de ambos arrays es la misma.
Realiza una copia y ordena ambos arrays.
Compara elemento por elemento para determinar si son iguales.

**AuthUtils.js:**

Funcionalidad: Contiene funciones relacionadas con la autenticaci贸n.
L贸gica:
isAdmin(userID): Verifica si un usuario tiene el rol de "Admin".
getUUID(auth0User): Obtiene un UUID 煤nico para un usuario a partir de su ID de autenticaci贸n.

**index.js:**

Funcionalidad: Combina y exporta funciones de varios archivos en un solo objeto.
L贸gica: Utiliza el operador spread (...) para combinar todas las funciones exportadas de archivos individuales.

**isStringLengthInRange.js:**

Funcionalidad: Verifica si la longitud de una cadena est谩 dentro de un rango especificado.
L贸gica: Compara la longitud de la cadena con los valores m铆nimos y m谩ximos especificados.

**isValidEmail.js:**

Funcionalidad: Valida si una cadena sigue el formato b谩sico de un correo electr贸nico.
L贸gica: Utiliza una expresi贸n regular para verificar si la cadena coincide con el formato de correo electr贸nico.

**isValidHourMinuteFormat.js:**

Funcionalidad: Verifica si una cadena sigue el formato "hora:minuto" (por ejemplo, "00:00").
L贸gica: Utiliza una expresi贸n regular para verificar si la cadena coincide con el formato de hora:minuto.

**isValidImageUrl.js:**

Funcionalidad: Valida si una cadena es una URL de imagen v谩lida.
L贸gica: Utiliza una expresi贸n regular para verificar si la cadena coincide con un patr贸n de URL.

**isValidPhoneNumber.js:**

Funcionalidad: Valida si una cadena es un n煤mero de tel茅fono v谩lido con al menos 8 d铆gitos.
L贸gica: Utiliza una expresi贸n regular para verificar si la cadena cumple con el formato de n煤mero de tel茅fono.

**isValidPositiveInteger.js:**

Funcionalidad: Valida si un n煤mero (o cadena) es un entero positivo.
L贸gica: Verifica si es un entero, no es NaN y es mayor o igual a cero.

 **isValidPositiveNumber.js:**

Funcionalidad Valida si un n煤mero (o cadena) es un n煤mero positivo.
L贸gica: Verifica si no es NaN y es mayor o igual a cero.

 **isValidUUID.js:**

Funcionalidad: Valida si una cadena es un UUID v谩lido.
L贸gica: Utiliza una expresi贸n regular para verificar si la cadena coincide con el formato de UUID.

**parseIntStrict.js:**

Funcionalidad: Parsea un valor a entero o NaN de manera estricta.
L贸gica: Utiliza parseInt, pero devuelve NaN si el resultado es NaN.

**toTitle.js:**

Funcionalidad: Convierte una cadena a formato de t铆tulo (primera letra may煤scula).
L贸gica: Toma la primera letra de la cadena y la convierte a may煤scula.

**validateSimpleDate.js:**

Funcionalidad: Valida si una cadena es una fecha en formato YYYY-MM-DD.
L贸gica: Utiliza una expresi贸n regular para verificar si la cadena cumple con el formato de fecha.

[**IMPORTANTE**]:
### ** hay que aclarar que con el tiempo fueron desarrollando distintas y nuevas funciones en el back las cuales no estan documentadas en el Readme pero espero que puedan comprender su logica, funcionalidad y flujo de estas**

---

<div align="center">
<img src="./F1.svg" alt="" style="margin-top: 30px; width: 300px;" />
</div>